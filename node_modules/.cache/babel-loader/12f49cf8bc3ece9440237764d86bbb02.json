{"ast":null,"code":"import { __assign, __rest, __makeTemplateObject } from 'tslib';\nimport React__default, { createElement, useRef, useEffect, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport useDimensions from 'react-use-dimensions';\n\nvar Play = function (props) {\n  return React__default.createElement(\"svg\", __assign({\n    viewBox: \"0 0 1.25 1.25\",\n    display: \"block\"\n  }, props), React__default.createElement(\"path\", {\n    fill: \"currentColor\",\n    d: \"M.25.125l1 .5-1 .5z\"\n  }));\n};\n\nvar Pause = function (props) {\n  return React__default.createElement(\"svg\", __assign({\n    viewBox: \"0 0 1 1\",\n    display: \"block\"\n  }, props), React__default.createElement(\"g\", {\n    fill: \"currentColor\"\n  }, React__default.createElement(\"path\", {\n    d: \"M.15.15h.262v.7H.15zM.588.15H.85v.7H.588z\"\n  })));\n};\n\nvar SkipBack = function (_a) {\n  var seconds = _a.seconds,\n      rest = __rest(_a, [\"seconds\"]);\n\n  return React__default.createElement(\"svg\", __assign({\n    viewBox: \"0 0 71 71\"\n  }, rest), React__default.createElement(\"defs\", null, React__default.createElement(\"clipPath\", {\n    id: \"prefix__a\"\n  }, React__default.createElement(\"path\", {\n    d: \"M.5 71.5V.5h71v71z\"\n  }))), React__default.createElement(\"g\", {\n    clipPath: \"url(#prefix__a)\",\n    transform: \"matrix(-1 0 0 1 71 0)\"\n  }, React__default.createElement(\"path\", {\n    d: \"M61.5 35.5c0 7-2 14-8 20-10 11-28 11-39 0-10-11-10-28 0-39 6-6 14-8 21-8h1\",\n    fill: \"none\",\n    strokeWidth: 3,\n    stroke: \"currentColor\",\n    strokeLinecap: \"square\"\n  }), React__default.createElement(\"path\", {\n    d: \"M61.5 35.5h-6M12.5 35.5h-6M34.5 57.5v6\",\n    fill: \"none\",\n    strokeWidth: 3,\n    stroke: \"currentColor\"\n  }), React__default.createElement(\"path\", {\n    d: \"M34 1l11 7-11 7v-1V0zM45 1l12 7-12 7v-1V0z\",\n    fill: \"currentColor\"\n  })), React__default.createElement(\"text\", {\n    x: 23,\n    y: 44,\n    fontSize: 23,\n    fill: \"currentColor\",\n    className: \"prefix__svgcentertext\"\n  }, seconds));\n};\n\nvar SkipForward = function (_a) {\n  var seconds = _a.seconds,\n      rest = __rest(_a, [\"seconds\"]);\n\n  return React__default.createElement(\"svg\", __assign({\n    viewBox: \"0 0 71 71\"\n  }, rest), React__default.createElement(\"defs\", null, React__default.createElement(\"clipPath\", {\n    id: \"prefix__a\"\n  }, React__default.createElement(\"path\", {\n    d: \"M.5 71.5V.5h71v71z\"\n  }))), React__default.createElement(\"g\", {\n    clipPath: \"url(#prefix__a)\"\n  }, React__default.createElement(\"path\", {\n    d: \"M61.5 35.5c0 7-2 14-8 20-10 11-28 11-39 0-10-11-10-28 0-39 6-6 14-8 21-8h1\",\n    fill: \"none\",\n    strokeWidth: 3,\n    stroke: \"currentColor\",\n    strokeLinecap: \"square\"\n  }), React__default.createElement(\"path\", {\n    d: \"M61.5 35.5h-6M12.5 35.5h-6M34.5 57.5v6\",\n    fill: \"none\",\n    strokeWidth: 3,\n    stroke: \"currentColor\"\n  }), React__default.createElement(\"path\", {\n    d: \"M34 1l11 7-11 7v-1V0zM45 1l12 7-12 7v-1V0z\",\n    fill: \"currentColor\"\n  })), React__default.createElement(\"text\", {\n    x: 22,\n    y: 44,\n    fontSize: 23,\n    fill: \"currentColor\",\n    className: \"prefix__svgcentertext\"\n  }, seconds));\n};\n\nvar ProgressBar = function (_a) {\n  var background = _a.background,\n      completeBackground = _a.completeBackground,\n      color = _a.color,\n      seek = _a.seek,\n      total = _a.total,\n      value = _a.value,\n      size = _a.size;\n  var element = React__default.useRef(null);\n  return React__default.createElement(Container, {\n    ref: element,\n    color: background,\n    style: {\n      height: size,\n      minHeight: size\n    }\n  }, React__default.createElement(Progress, {\n    value: value,\n    max: total || 0,\n    background: background,\n    completeBackground: completeBackground\n  }), React__default.createElement(Slider, {\n    value: value,\n    max: total || 0,\n    color: color,\n    size: size,\n    onChange: function (event) {\n      return seek(Number(event.target.value));\n    }\n  }));\n};\n\nvar Container =\n/*#__PURE__*/\nstyled.div(templateObject_1 || (templateObject_1 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  position: relative;\\n\"], [\"\\n  position: relative;\\n\"])));\nvar fullWidth =\n/*#__PURE__*/\ncss(templateObject_2 || (templateObject_2 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n\"], [\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  width: 100%;\\n  height: 100%;\\n\"])));\n\nvar progressStyles = function (_a) {\n  var completeBackground = _a.completeBackground;\n  return css(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  background-color: \", \";\\n\"], [\"\\n  background-color: \", \";\\n\"])), completeBackground);\n};\n\nvar Progress =\n/*#__PURE__*/\nstyled.progress(templateObject_4 || (templateObject_4 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  \", \"\\n  background-color: \", \";\\n  box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.3);\\n  &[value]::-webkit-progress-value {\\n    \", \"\\n  }\\n  &[value]::-moz-progress-value {\\n    \", \"\\n  }\\n  &[value]::-webkit-progress-bar {\\n    background-color: \", \";\\n  }\\n\"], [\"\\n  \", \"\\n  background-color: \", \";\\n  box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.3);\\n  &[value]::-webkit-progress-value {\\n    \", \"\\n  }\\n  &[value]::-moz-progress-value {\\n    \", \"\\n  }\\n  &[value]::-webkit-progress-bar {\\n    background-color: \", \";\\n  }\\n\"])), fullWidth, function (props) {\n  return props.background;\n}, progressStyles, progressStyles, function (props) {\n  return props.background;\n});\n\nvar thumbStyles = function (_a) {\n  var color = _a.color,\n      size = _a.size;\n  return css(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  background-color: \", \";\\n  height: \", \"px;\\n  width: \", \"px;\\n  appearance: none;\\n  cursor: grab;\\n\"], [\"\\n  background-color: \", \";\\n  height: \", \"px;\\n  width: \", \"px;\\n  appearance: none;\\n  cursor: grab;\\n\"])), color, size, size / 2);\n};\n\nvar rangeStyles =\n/*#__PURE__*/\ncss(templateObject_6 || (templateObject_6 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  \", \"\\n  background-color: transparent;\\n  border: 0;\\n  margin: 0;\\n  appearance: none;\\n\"], [\"\\n  \", \"\\n  background-color: transparent;\\n  border: 0;\\n  margin: 0;\\n  appearance: none;\\n\"])), fullWidth);\nvar Slider =\n/*#__PURE__*/\nstyled.input.attrs({\n  type: 'range'\n})(templateObject_7 || (templateObject_7 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  &:focus {\\n    outline: none;\\n  }\\n  \", \"\\n  &[value]::-moz-range-track {\\n    \", \"\\n  }\\n  &[value]::-webkit-slider-thumb {\\n    \", \"\\n  }\\n  &[value]::-moz-slider-thumb {\\n    \", \"\\n  }\\n\"], [\"\\n  &:focus {\\n    outline: none;\\n  }\\n  \", \"\\n  &[value]::-moz-range-track {\\n    \", \"\\n  }\\n  &[value]::-webkit-slider-thumb {\\n    \", \"\\n  }\\n  &[value]::-moz-slider-thumb {\\n    \", \"\\n  }\\n\"])), rangeStyles, rangeStyles, thumbStyles, thumbStyles);\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;\n\nfunction Time(_a) {\n  var className = _a.className,\n      value = _a.value;\n  return createElement(\"div\", {\n    className: className\n  }, secondsToHHMMSS(value));\n}\n\nfunction secondsToHHMMSS(t) {\n  if (t === undefined || isNaN(t)) return '-:--';\n  var h = Math.floor(t / 3600);\n  var m = Math.floor(t / 60) % 60;\n  var s = Math.floor(t % 60);\n  return \"\" + (h ? h + ':' : '') + (h ? ('0' + m).slice(-2) : m) + \":\" + ('0' + s).slice(-2);\n}\n\nfunction useListener(element, eventName, listener) {\n  var savedListener = useRef();\n  useEffect(function () {\n    savedListener.current = listener;\n  }, [listener]);\n  useEffect(function () {\n    var eventListener = function (event) {\n      return savedListener.current && savedListener.current(event);\n    };\n\n    if (element.current) {\n      element.current.addEventListener(eventName, eventListener);\n    }\n\n    return function () {\n      if (element.current) {\n        element.current.removeEventListener(eventName, eventListener);\n      }\n    };\n  }, [eventName, element.current]);\n}\n\nfunction useListeners(element, listeners) {\n  Object.keys(listeners).forEach(function (eventName) {\n    return useListener(element, eventName, listeners[eventName]);\n  });\n}\n\nfunction preventDefault(fn) {\n  return function (event) {\n    event.preventDefault();\n    fn();\n  };\n}\n\nfunction useAudioPlayer() {\n  var _a = useState(false),\n      playing = _a[0],\n      setPlaying = _a[1];\n\n  var _b = useState(),\n      duration = _b[0],\n      setDuration = _b[1];\n\n  var _c = useState(0),\n      time = _c[0],\n      setTime = _c[1];\n\n  var player = useRef(null);\n\n  var updateDuration = function () {\n    return setDuration(player.current ? player.current.duration : undefined);\n  };\n\n  var updateTime = function () {\n    return setTime(player.current ? player.current.currentTime : 0);\n  };\n\n  useListeners(player, {\n    play: function () {\n      return setPlaying(true);\n    },\n    pause: function () {\n      return setPlaying(false);\n    },\n    ended: function () {\n      return setPlaying(false);\n    },\n    durationchange: updateDuration,\n    seeked: updateTime,\n    timeupdate: updateTime,\n    loadedmetadata: updateDuration\n  });\n  return {\n    playerRef: player,\n    playing: playing,\n    time: time,\n    duration: duration,\n    play: preventDefault(function () {\n      return player.current && player.current.play();\n    }),\n    pause: preventDefault(function () {\n      return player.current && player.current.pause();\n    }),\n    seek: function (time) {\n      return player.current && (player.current.currentTime = time < 0 ? 0 : Math.min(time, player.current.duration));\n    },\n    skipForward: function (amount) {\n      return player.current && (player.current.currentTime = Math.min(player.current.currentTime + amount, player.current.duration));\n    },\n    skipBack: function (amount) {\n      return player.current && (player.current.currentTime = Math.max(player.current.currentTime - amount, 0));\n    }\n  };\n}\n\nvar canonicalWidth = 750;\nvar canonicalHeight = 225;\nvar aspectRatio = canonicalWidth / canonicalHeight;\n\nfunction AudioCard(_a) {\n  var art = _a.art,\n      autoPlay = _a.autoPlay,\n      background = _a.background,\n      className = _a.className,\n      _b = _a.color,\n      color = _b === void 0 ? '#666' : _b,\n      link = _a.link,\n      linkText = _a.linkText,\n      _c = _a.preload,\n      preload = _c === void 0 ? 'none' : _c,\n      _d = _a.progressBarBackground,\n      progressBarBackground = _d === void 0 ? '#ddd' : _d,\n      _e = _a.progressBarCompleteBackground,\n      progressBarCompleteBackground = _e === void 0 ? '#aaa' : _e,\n      skipBackSeconds = _a.skipBackSeconds,\n      skipForwardSeconds = _a.skipForwardSeconds,\n      source = _a.source,\n      title = _a.title;\n\n  var _f = useAudioPlayer(),\n      playerRef = _f.playerRef,\n      playing = _f.playing,\n      time = _f.time,\n      duration = _f.duration,\n      play = _f.play,\n      pause = _f.pause,\n      seek = _f.seek,\n      skipForward = _f.skipForward,\n      skipBack = _f.skipBack;\n\n  var _g = useDimensions(),\n      ref = _g[0],\n      width = _g[1].width;\n\n  var height = width / aspectRatio;\n\n  var h = function (value) {\n    return value * height / canonicalHeight;\n  };\n\n  var w = function (value) {\n    return value * width / canonicalWidth;\n  };\n\n  return createElement(Container$1, {\n    className: className,\n    ref: ref,\n    background: background,\n    color: color,\n    style: {\n      height: height\n    }\n  }, createElement(\"audio\", {\n    src: source,\n    ref: playerRef,\n    style: {\n      display: 'none'\n    },\n    preload: preload,\n    autoPlay: autoPlay\n  }), art && createElement(Art, {\n    src: art,\n    style: {\n      height: height,\n      width: height,\n      minHeight: height,\n      minWidth: height\n    }\n  }), createElement(Content, null, title && createElement(Title, {\n    style: {\n      fontSize: h(24),\n      width: w(canonicalWidth - (art ? canonicalHeight : 0) - 20),\n      margin: h(12) + \"px \" + w(10) + \"px \" + h(12) + \"px \" + w(10) + \"px\",\n      minHeight: h(30)\n    }\n  }, title), createElement(Controls, {\n    style: {\n      fontSize: h(16)\n    }\n  }, skipBackSeconds === undefined ? createElement(Control, {\n    as: \"div\"\n  }) : createElement(Control, {\n    onClick: preventDefault(function () {\n      return skipBack(skipBackSeconds);\n    })\n  }, createElement(SkipBack, {\n    seconds: skipBackSeconds\n  })), !playing && createElement(Control, {\n    onClick: play\n  }, createElement(Play, null)), playing && createElement(Control, {\n    onClick: pause\n  }, createElement(Pause, null)), skipForwardSeconds === undefined ? createElement(Control, {\n    as: \"div\"\n  }) : createElement(Control, {\n    onClick: preventDefault(function () {\n      return skipForward(skipForwardSeconds);\n    })\n  }, createElement(SkipForward, {\n    seconds: skipForwardSeconds\n  }))), link && linkText && createElement(Link, {\n    href: link,\n    style: {\n      fontSize: h(20)\n    }\n  }, linkText), createElement(Times, {\n    style: {\n      fontSize: h(16)\n    }\n  }, createElement(Time, {\n    value: time\n  }), createElement(Time, {\n    value: duration\n  })), createElement(ProgressBar, {\n    value: time,\n    total: duration,\n    color: color,\n    background: progressBarBackground,\n    completeBackground: progressBarCompleteBackground,\n    seek: seek,\n    size: h(20)\n  })));\n}\n\nvar Container$1 =\n/*#__PURE__*/\nstyled.div(templateObject_1$1 || (templateObject_1$1 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  width: 100%;\\n  max-width: 100%;\\n  display: flex;\\n  flex-flow: row nowrap;\\n  * {\\n    font-family: 'San Francisco', 'Helvetica Neue', Helvetica, sans-serif;\\n    line-height: 1em;\\n  }\\n  \", \"\\n  color: \", \";\\n  a {\\n    color: \", \";\\n    text-decoration: none;\\n    &:active {\\n      color: \", \";\\n    }\\n  }\\n\"], [\"\\n  width: 100%;\\n  max-width: 100%;\\n  display: flex;\\n  flex-flow: row nowrap;\\n  * {\\n    font-family: 'San Francisco', 'Helvetica Neue', Helvetica, sans-serif;\\n    line-height: 1em;\\n  }\\n  \", \"\\n  color: \", \";\\n  a {\\n    color: \", \";\\n    text-decoration: none;\\n    &:active {\\n      color: \", \";\\n    }\\n  }\\n\"])), function (_a) {\n  var background = _a.background;\n  return background && \"background-color: \" + background + \";\";\n}, function (_a) {\n  var color = _a.color;\n  return color;\n}, function (_a) {\n  var color = _a.color;\n  return color;\n}, function (_a) {\n  var color = _a.color;\n  return color;\n});\nvar Content =\n/*#__PURE__*/\nstyled.div(templateObject_2$1 || (templateObject_2$1 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  flex: 1;\\n  display: flex;\\n  flex-flow: column nowrap;\\n  padding: 0;\\n\"], [\"\\n  flex: 1;\\n  display: flex;\\n  flex-flow: column nowrap;\\n  padding: 0;\\n\"])));\nvar Controls =\n/*#__PURE__*/\nstyled.div(templateObject_3$1 || (templateObject_3$1 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  flex: 1;\\n  display: flex;\\n  flex-flow: row nowrap;\\n  justify-content: space-between;\\n\"], [\"\\n  flex: 1;\\n  display: flex;\\n  flex-flow: row nowrap;\\n  justify-content: space-between;\\n\"])));\nvar Times =\n/*#__PURE__*/\nstyled.div(templateObject_4$1 || (templateObject_4$1 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  display: flex;\\n  flex-flow: row nowrap;\\n  justify-content: space-between;\\n  margin: 0 5px 5px 5px;\\n\"], [\"\\n  display: flex;\\n  flex-flow: row nowrap;\\n  justify-content: space-between;\\n  margin: 0 5px 5px 5px;\\n\"])));\nvar Control =\n/*#__PURE__*/\nstyled.a.attrs({\n  href: '#'\n})(templateObject_5$1 || (templateObject_5$1 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  text-decoration: none;\\n  display: flex;\\n  flex-flow: column nowrap;\\n  justify-content: center;\\n  margin: 5px;\\n  width: 15%;\\n\"], [\"\\n  text-decoration: none;\\n  display: flex;\\n  flex-flow: column nowrap;\\n  justify-content: center;\\n  margin: 5px;\\n  width: 15%;\\n\"])));\nvar Art =\n/*#__PURE__*/\nstyled.img(templateObject_6$1 || (templateObject_6$1 =\n/*#__PURE__*/\n__makeTemplateObject([\"\"], [\"\"])));\nvar Title =\n/*#__PURE__*/\nstyled.div(templateObject_7$1 || (templateObject_7$1 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  text-align: center;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n\"], [\"\\n  text-align: center;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n\"])));\nvar Link =\n/*#__PURE__*/\nstyled.a.attrs({\n  target: '_blank'\n})(templateObject_8 || (templateObject_8 =\n/*#__PURE__*/\n__makeTemplateObject([\"\\n  display: block;\\n  text-align: center;\\n  &:hover {\\n    text-decoration: underline;\\n  }\\n\"], [\"\\n  display: block;\\n  text-align: center;\\n  &:hover {\\n    text-decoration: underline;\\n  }\\n\"])));\nvar templateObject_1$1, templateObject_2$1, templateObject_3$1, templateObject_4$1, templateObject_5$1, templateObject_6$1, templateObject_7$1, templateObject_8;\nexport default AudioCard;","map":{"version":3,"sources":["../src/components/ProgressBar.tsx","../src/components/Time.tsx","../src/hooks/useListeners.ts","../src/util.ts","../src/hooks/useAudioPlayer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAwDe,WAAA,GAAA,UAAA,EAAA,EAAA;;;;MAgBd,IAAA,GAAA,EAAA,CAAA,I;;;;sCA0BA,I;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCvFoB,SAAA,GAAA,EAAA,CAAA,S;MAAW,KAAA,GAAA,EAAA,CAAA,K;;;;;;SAGzB,e,CAAA,C,EAAA;yBACa,KAAK,CAAA,CAAA,C,EAAA,OAAU,MAAV;;;;;;;;;;;;;;;ACavB,K;;gBAGc,O,EAAA;;;;;;;;AAKZ,K;;;;;;;;;;ACpCE,SAAA,cAAA,CAAA,EAAA,EAAA;;;;;;;;MCME,EAAA,GAAA,QAAA,CAAA,KAAA,C;mBAAA,C;sBAAA,C;;MACA,EAAA,GAAA,QAAA,E;oBAAA,C;uBAAA,C;;MACA,EAAA,GAAA,QAAA,CAAA,CAAA,C;gBAAA,C;mBAAA,C;;MAEA,MAAA,GAAA,MAAA,CAAA,IAAA,C;;;WAEN,WAAA,CAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,OAAA,CAAA,QAAA,GAAA,SAAA,C;;;MACE,UAAA,GAAA,YAAA;WAAA,OAAA,CAAA,MAAA,CAAA,OAAA,GAAA,MAAA,CAAA,OAAA,CAAA,WAAA,GAAA,CAAA,C;;;cAGM,CAAA,MAAA,EAAA;QACN,EAAA,YAAA;;KADM;;;KAAA;;;KAAA;kCAAA;sBAAA;0BAAA;;AAAA,GAAA,C;;;;QAcN,EAAA,I;;QAEA,EAAA,cAAO,CAAA,YAAA;;AAAA,KAAA,C;yBACC,CAAC,YAAA;;AAAD,KAAA,C;0BACC;6DAET,IAAA,GAAA,CAAA,GAAA,CAAA,GAAA,IAAA,CAAA,GAAA,CAAA,IAAA,EAAA,MAAA,CAAA,OAAA,CAAA,QAAA,C;;;sEAMA,MAAA,CAAA,OAAA,CAAA,WAAA,GAAA,M,EAAA,MAAA,CAAA,OAAA,CAAA,Q;;;aAMD,MAAA,CAAA,OAAA,KAAA,MAAA,CAAA,OAAA,CAAA,WAAA,GAAA,IAAA,CAAA,GAAA,CAAA,MAAA,CAAA,OAAA,CAAA,WAAA,GAAA,MAAA,EAAA,CAAA,CAAA,C","sourcesContent":["import React from 'react'\nimport styled, { css } from 'styled-components'\n\ninterface Props {\n  total: number | void\n  value: number\n  color: string\n  background: string\n  completeBackground: string\n  seek: (value: number) => void\n  size: number\n}\n\nexport const ProgressBar = ({\n  background,\n  completeBackground,\n  color,\n  seek,\n  total,\n  value,\n  size\n}: Props) => {\n  const element = React.useRef<HTMLDivElement>(null)\n\n  return (\n    <Container\n      ref={element}\n      color={background}\n      style={{ height: size, minHeight: size }}\n    >\n      <Progress\n        value={value}\n        max={total || 0}\n        background={background}\n        completeBackground={completeBackground}\n      />\n      <Slider\n        value={value}\n        max={total || 0}\n        color={color}\n        size={size}\n        onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n          seek(Number(event.target.value))\n        }\n      />\n    </Container>\n  )\n}\n\ninterface ContainerProps {\n  color: string\n}\nconst Container = styled.div<ContainerProps>`\n  position: relative;\n`\n\nconst fullWidth = css`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n`\n\ninterface ProgressProps {\n  background: string\n  completeBackground: string\n}\nconst progressStyles = ({ completeBackground }: ProgressProps) => css`\n  background-color: ${completeBackground};\n`\nconst Progress = styled.progress<ProgressProps>`\n  ${fullWidth}\n  background-color: ${props => props.background};\n  box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.3);\n  &[value]::-webkit-progress-value {\n    ${progressStyles}\n  }\n  &[value]::-moz-progress-value {\n    ${progressStyles}\n  }\n  &[value]::-webkit-progress-bar {\n    background-color: ${props => props.background};\n  }\n`\n\ninterface SliderProps {\n  color: string\n  size: number\n}\nconst thumbStyles = ({ color, size }: SliderProps) => css`\n  background-color: ${color};\n  height: ${size}px;\n  width: ${size / 2}px;\n  appearance: none;\n  cursor: grab;\n`\nconst rangeStyles = css`\n  ${fullWidth}\n  background-color: transparent;\n  border: 0;\n  margin: 0;\n  appearance: none;\n`\nconst Slider = styled.input.attrs({ type: 'range' })<SliderProps>`\n  &:focus {\n    outline: none;\n  }\n  ${rangeStyles}\n  &[value]::-moz-range-track {\n    ${rangeStyles}\n  }\n  &[value]::-webkit-slider-thumb {\n    ${thumbStyles}\n  }\n  &[value]::-moz-slider-thumb {\n    ${thumbStyles}\n  }\n`\n","import * as React from 'react'\n\ninterface Props {\n  className?: string\n  value: number | void\n}\nexport function Time({ className, value }: Props) {\n  return <div className={className}>{secondsToHHMMSS(value)}</div>\n}\n\nfunction secondsToHHMMSS(t: number | void) {\n  if (t === undefined || isNaN(t)) return '-:--'\n  var h = Math.floor(t / 3600)\n  var m = Math.floor(t / 60) % 60\n  var s = Math.floor(t % 60)\n  return `${h ? h + ':' : ''}${h ? ('0' + m).slice(-2) : m}:${('0' + s).slice(\n    -2\n  )}`\n}\n","import * as React from 'react'\n\nexport interface Listenable {\n  addEventListener: (eventName: string, listener: EventListener) => void\n  removeEventListener: (eventName: string, listener: EventListener) => void\n}\n\nfunction useListener(\n  element: React.RefObject<Listenable>,\n  eventName: string,\n  listener: EventListener\n) {\n  const savedListener = React.useRef<EventListener>()\n  React.useEffect(() => {\n    savedListener.current = listener\n  }, [listener])\n\n  React.useEffect(() => {\n    const eventListener: EventListener = event =>\n      savedListener.current && savedListener.current(event)\n    if (element.current) {\n      element.current.addEventListener(eventName, eventListener)\n    }\n    return () => {\n      if (element.current) {\n        element.current.removeEventListener(eventName, eventListener)\n      }\n    }\n  }, [eventName, element.current])\n}\n\nexport function useListeners(\n  element: React.RefObject<Listenable>,\n  listeners: Record<string, EventListener>\n) {\n  Object.keys(listeners).forEach(eventName =>\n    useListener(element, eventName, listeners[eventName])\n  )\n}\n","export function preventDefault(fn: () => void) {\n  return (event: React.SyntheticEvent<any>) => {\n    event.preventDefault()\n    fn()\n  }\n}\n","import * as React from 'react'\nimport { useListeners } from './useListeners'\nimport { preventDefault } from '../util'\n\nexport function useAudioPlayer() {\n  const [playing, setPlaying] = React.useState(false)\n  const [duration, setDuration] = React.useState<number | void>()\n  const [time, setTime] = React.useState(0)\n  const player = React.useRef<HTMLAudioElement>(null)\n\n  const updateDuration = () =>\n    setDuration(player.current ? player.current.duration : undefined)\n  const updateTime = () =>\n    setTime(player.current ? player.current.currentTime : 0)\n\n  useListeners(player, {\n    play: () => setPlaying(true),\n    pause: () => setPlaying(false),\n    ended: () => setPlaying(false),\n    durationchange: updateDuration,\n    seeked: updateTime,\n    timeupdate: updateTime,\n    loadedmetadata: updateDuration\n  })\n\n  return {\n    playerRef: player,\n    playing,\n    time,\n    duration,\n    play: preventDefault(() => player.current && player.current.play()),\n    pause: preventDefault(() => player.current && player.current.pause()),\n    seek: (time: number) =>\n      player.current &&\n      (player.current.currentTime =\n        time < 0 ? 0 : Math.min(time, player.current.duration)),\n    skipForward: (amount: number) =>\n      player.current &&\n      (player.current.currentTime = Math.min(\n        player.current.currentTime + amount,\n        player.current.duration\n      )),\n    skipBack: (amount: number) =>\n      player.current &&\n      (player.current.currentTime = Math.max(\n        player.current.currentTime - amount,\n        0\n      ))\n  }\n}\n"]},"metadata":{},"sourceType":"module"}